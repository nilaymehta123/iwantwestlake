!function(e){_.isUndefined(window.vc)&&(window.vc={}),window.InlineShortcodeViewContainer=window.InlineShortcodeView.extend({controls_selector:"#vc_controls-template-container",events:{"click > .vc_controls .vc_element .vc_control-btn-delete":"destroy","click > .vc_controls .vc_element .vc_control-btn-edit":"edit","click > .vc_controls .vc_element .vc_control-btn-clone":"clone","click > .vc_controls .vc_element .vc_control-btn-prepend":"prependElement","click > .vc_controls .vc_control-btn-append":"appendElement","click > .vc_empty-element":"appendElement",mouseenter:"resetActive",mouseleave:"holdActive"},hold_active:!1,initialize:function(e){_.bindAll(this,"holdActive"),window.InlineShortcodeViewContainer.__super__.initialize.call(this,e),this.parent_view=vc.shortcodes.get(this.model.get("parent_id")).view},resetActive:function(){this.hold_active&&window.clearTimeout(this.hold_active)},holdActive:function(){this.resetActive(),this.$el.addClass("vc_hold-active");var e=this;this.hold_active=window.setTimeout(function(){e.hold_active&&window.clearTimeout(e.hold_active),e.hold_active=!1,e.$el.removeClass("vc_hold-active")},700)},content:function(){return this.$content===!1&&(this.$content=this.$el.find(".vc_container-anchor:first").parent(),this.$el.find(".vc_container-anchor:first").remove()),this.$content},render:function(){return window.InlineShortcodeViewContainer.__super__.render.call(this),this.content().addClass("vc_element-container"),this.$el.addClass("vc_container-block"),this},changed:function(){0==this.$el.find(".vc_element[data-tag]").length&&this.$el.addClass("vc_empty").find("> :first").addClass("vc_empty-element")||this.$el.removeClass("vc_empty").find("> .vc_empty-element").removeClass("vc_empty-element")},prependElement:function(e){_.isObject(e)&&e.preventDefault(),this.prepend=!0,vc.add_element_block_view.render(this.model,!0)},appendElement:function(e){_.isObject(e)&&e.preventDefault(),vc.add_element_block_view.render(this.model)},addControls:function(){var t=e(this.controls_selector).html(),i=vc.shortcodes.get(this.model.get("parent_id")),n={name:vc.getMapped(this.model.get("shortcode")).name,tag:this.model.get("shortcode"),parent_name:vc.getMapped(i.get("shortcode")).name,parent_tag:i.get("shortcode")};this.$controls=e(_.template(t,n,vc.template_options).trim()).addClass("vc_controls"),this.hasUserAccess()||this.$controls.find(".vc_control-btn:not(.vc_element-move)").remove(),this.$controls.appendTo(this.$el)},multi_edit:function(e){var t,i,n=[];_.isObject(e)&&e.preventDefault(),this.model.get("parent_id")&&(t=vc.shortcodes.get(this.model.get("parent_id"))),t?(n.push(t),i=vc.shortcodes.where({parent_id:t.get("id")}),vc.multi_edit_element_block_view.render(n.concat(i),this.model.get("id"))):vc.edit_element_block_view.render(this.model)}}),window.InlineShortcodeViewContainerWithParent=window.InlineShortcodeViewContainer.extend({controls_selector:"#vc_controls-template-container-with-parent",events:{"click > .vc_controls .vc_element .vc_control-btn-delete":"destroy","click > .vc_controls .vc_element .vc_control-btn-edit":"edit","click > .vc_controls .vc_element .vc_control-btn-clone":"clone","click > .vc_controls .vc_element .vc_control-btn-prepend":"prependElement","click > .vc_controls .vc_control-btn-append":"appendElement","click > .vc_controls .vc_parent .vc_control-btn-delete":"destroyParent","click > .vc_controls .vc_parent .vc_control-btn-edit":"editParent","click > .vc_controls .vc_parent .vc_control-btn-clone":"cloneParent","click > .vc_controls .vc_parent .vc_control-btn-prepend":"addSibling","click > .vc_controls .vc_parent .vc_control-btn-layout":"changeLayout","click > .vc_empty-element":"appendElement","click > .vc_controls .vc_control-btn-switcher":"switchControls",mouseenter:"resetActive",mouseleave:"holdActive"},destroyParent:function(e){e&&e.preventDefault(),this.parent_view.destroy(e)},cloneParent:function(e){e&&e.preventDefault(),this.parent_view.clone(e)},editParent:function(e){e&&e.preventDefault(),this.parent_view.edit(e)},addSibling:function(e){e&&e.preventDefault(),this.parent_view.addElement(e)},changeLayout:function(e){e&&e.preventDefault(),this.parent_view.changeLayout(e)},switchControls:function(t){t&&t.preventDefault(),vc.unsetHoldActive();var i,n=e(t.currentTarget),o=n.parent();o.addClass("vc_active"),i=o.siblings(".vc_active").removeClass("vc_active"),!i.hasClass("vc_element")&&window.setTimeout(this.holdActive,500)}}),window.InlineShortcodeView_vc_column_text=window.InlineShortcodeView.extend({initialize:function(e){window.InlineShortcodeView_vc_column_text.__super__.initialize.call(this,e),_.bindAll(this,"setupEditor","updateContent")},render:function(){return window.InlineShortcodeView_vc_column_text.__super__.render.call(this),this},setupEditor:function(e){e.on("keyup",this.updateContent)},updateContent:function(){var e=this.model.get("params");e.content=tinyMCE.activeEditor.getContent(),this.model.save({params:e},{silent:!0})}}),window.InlineShortcodeView_vc_row=window.InlineShortcodeView.extend({column_tag:"vc_column",events:{mouseenter:"removeHoldActive"},layout:1,addControls:function(){return this.$controls=e('<div class="no-controls"></div>'),this.$controls.appendTo(this.$el),this},removeHoldActive:function(){vc.unsetHoldActive()},addColumn:function(){vc.builder.create({shortcode:this.column_tag,parent_id:this.model.get("id")}).render()},addElement:function(e){e&&e.preventDefault(),this.addColumn()},changeLayout:function(e){e&&e.preventDefault(),this.layoutEditor().render(this.model).show()},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutEditorPanelView({el:e("#vc_row-layout-panel")})),vc.row_layout_editor},convertToWidthsArray:function(e){return _.map(e.split(/_/),function(e){var t=e.split("");return t.splice(Math.floor(e.length/2),0,"/"),t.join("")})},changed:function(){window.InlineShortcodeView_vc_row.__super__.changed.call(this),this.addLayoutClass()},content:function(){return this.$content===!1&&(this.$content=this.$el.find(".vc_container-anchor:first").parent()),this.$el.find(".vc_container-anchor:first").remove(),this.$content},addLayoutClass:function(){this.$el.removeClass("vc_layout_"+this.layout),this.layout=_.reject(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){return e.get("deleted")}).length,this.$el.addClass("vc_layout_"+this.layout)},convertRowColumns:function(e,t){if(!e)return!1;var i,n=[],o=this.convertToWidthsArray(e);return vc.layout_change_shortcodes=[],vc.layout_old_columns=vc.shortcodes.where({parent_id:this.model.get("id")}),_.each(vc.layout_old_columns,function(e){e.set("deleted",!0),n.push({shortcodes:vc.shortcodes.where({parent_id:e.get("id")}),params:e.get("params")})}),_.each(o,function(e){var o=n.shift();_.isObject(o)?(i=t.create({shortcode:this.column_tag,parent_id:this.model.get("id"),order:vc.shortcodes.nextOrder(),params:_.extend({},o.params,{width:e})}).last(),_.each(o.shortcodes,function(e){e.save({parent_id:i.get("id"),order:vc.shortcodes.nextOrder()},{silent:!0}),vc.layout_change_shortcodes.push(e)},this)):i=t.create({shortcode:this.column_tag,parent_id:this.model.get("id"),order:vc.shortcodes.nextOrder(),params:{width:e}}).last()},this),_.each(n,function(e){_.each(e.shortcodes,function(e){e.save({parent_id:i.get("id"),order:vc.shortcodes.nextOrder()},{silent:!0}),vc.layout_change_shortcodes.push(e),e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()},this)},this),t.render(function(){_.each(vc.layout_change_shortcodes,function(e){e.trigger("change:parent_id"),e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()}),_.each(vc.layout_old_columns,function(e){e.destroy()}),vc.layout_old_columns=[],vc.layout_change_shortcodes=[]}),o}}),window.InlineShortcodeView_vc_column=window.InlineShortcodeViewContainerWithParent.extend({controls_selector:"#vc_controls-template-vc_column",resizeDomainName:"columnSize",_x:0,css_width:12,prepend:!1,initialize:function(e){window.InlineShortcodeView_vc_column.__super__.initialize.call(this,e),_.bindAll(this,"startChangeSize","stopChangeSize","resize")},render:function(){return window.InlineShortcodeView_vc_column.__super__.render.call(this),this.prepend=!1,e('<div class="vc_resize-bar"></div>').appendTo(this.$el).mousedown(this.startChangeSize),this.setColumnClasses(),this.customCssClassReplace(),this},destroy:function(e){var t=this.model.get("parent_id");window.InlineShortcodeView_vc_column.__super__.destroy.call(this,e),vc.shortcodes.where({parent_id:t}).length||vc.shortcodes.get(t).destroy()},customCssClassReplace:function(){var e,t,i;e=this.$el.find(".wpb_column").attr("class"),t=/.*(vc_custom_\d+).*/,i=e&&e.match?e.match(t):!1,i&&i[1]&&(this.$el.addClass(i[1]),this.$el.find(".wpb_column").attr("class",e.replace(i[1],"").trim()))},setColumnClasses:function(){var e=this.getParam("offset")||"",t=this.getParam("width")||"1/1",i=this.$el.find("> .wpb_column");this.css_class_width=this.convertSize(t).replace(/[^\d]/g,""),i.removeClass("vc_col-sm-"+this.css_class_width),e.match(/vc_col\-sm\-\d+/)||this.$el.addClass("vc_col-sm-"+this.css_class_width),vc.responsive_disabled&&(e=e.replace(/vc_col\-(lg|md|xs)[^\s]*/g,"")),_.isEmpty(e)||(i.removeClass(e),this.$el.addClass(e))},startChangeSize:function(t){var i=this.getParam(i)||12;this._grid_step=this.parent_view.$el.width()/i,vc.frame_window.jQuery("body").addClass("vc_column-dragging").disableSelection(),this._x=parseInt(t.pageX),vc.$page.bind("mousemove."+this.resizeDomainName,this.resize),e(vc.frame_window.document).mouseup(this.stopChangeSize)},stopChangeSize:function(){this._x=0,vc.frame_window.jQuery("body").removeClass("vc_column-dragging").enableSelection(),vc.$page.unbind("mousemove."+this.resizeDomainName)},resize:function(e){var t,i,n=this.model.get("params");i=e.pageX-this._x,Math.abs(i)<this._grid_step||(this._x=parseInt(e.pageX),t=""+this.css_class_width,i>0?this.css_class_width+=1:0>i&&(this.css_class_width-=1),this.css_class_width>12&&(this.css_class_width=12),this.css_class_width<1&&(this.css_class_width=1),n.width=vc.getColumnSize(this.css_class_width),this.model.save({params:n},{silent:!0}),this.$el.removeClass("vc_col-sm-"+t).addClass("vc_col-sm-"+this.css_class_width))},convertSize:function(e){var t="vc_col-sm-",i=e?e.split("/"):[1,1],n=_.range(1,13),o=!_.isUndefined(i[0])&&_.indexOf(n,parseInt(i[0],10))>=0?parseInt(i[0],10):!1,c=!_.isUndefined(i[1])&&_.indexOf(n,parseInt(i[1],10))>=0?parseInt(i[1],10):!1;return o!==!1&&c!==!1?t+12*o/c:t+"12"}}),window.InlineShortcodeView_vc_row_inner=window.InlineShortcodeView_vc_row.extend({column_tag:"vc_column_inner"}),window.InlineShortcodeView_vc_column_inner=window.InlineShortcodeView_vc_column.extend({}),window.InlineShortcodeView_vc_tabs=window.InlineShortcodeView_vc_row.extend({events:{"click > :first > .vc_empty-element":"addElement","click > :first > .wpb_wrapper > .ui-tabs-nav > li":"setActiveTab"},already_build:!1,active_model_id:!1,$tabsNav:!1,active:0,render:function(){return _.bindAll(this,"stopSorting"),this.$tabs=this.$el.find("> .wpb_tabs"),window.InlineShortcodeView_vc_tabs.__super__.render.call(this),this.buildNav(),this},buildNav:function(){var t=this.tabsControls();this.$tabs.find('> .wpb_wrapper > .vc_element[data-tag="vc_tab"]').each(function(i){e("li:eq("+i+")",t).attr("data-m-id",e(this).data("model-id"))})},changed:function(){0==this.$el.find(".vc_element[data-tag]").length?this.$el.addClass("vc_empty").find("> :first > div").addClass("vc_empty-element"):this.$el.removeClass("vc_empty").find("> :first > div").removeClass("vc_empty-element"),this.setSorting()},setActiveTab:function(t){var i=e(t.currentTarget);this.active_model_id=i.data("m-id")},tabsControls:function(){return this.$tabsNav?this.$tabsNav:this.$tabsNav=this.$el.find(".wpb_tabs_nav")},buildTabs:function(e){if(e&&(this.active_model_id=e.get("id"),this.active=this.tabsControls().find("[data-m-id="+this.active_model_id+"]").index()),this.active_model_id===!1){var t=this.tabsControls().find("li:first");this.active=t.index(),this.active_model_id=t.data("m-id")}this.checkCount()||vc.frame_window.vc_iframe.buildTabs(this.$tabs,this.active)},checkCount:function(){return this.$tabs.find('> .wpb_wrapper > .vc_element[data-tag="vc_tab"]').length!=this.$tabs.find("> .wpb_wrapper > .vc_element.vc_vc_tab").length},beforeUpdate:function(){this.$tabs.find(".wpb_tabs_heading").remove(),vc.frame_window.vc_iframe.destroyTabs(this.$tabs)},updated:function(){window.InlineShortcodeView_vc_tabs.__super__.updated.call(this),this.$tabs.find(".wpb_tabs_nav:first").remove(),this.buildNav(),vc.frame_window.vc_iframe.buildTabs(this.$tabs),this.setSorting()},rowsColumnsConverted:function(){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()})},addTab:function(e){if(this.updateIfExistTab(e))return!1;var t,i=this.buildControlHtml(e);return e.get("cloned")&&(t=this.tabsControls().find("[data-m-id="+e.get("cloned_from").id+"]")).length?e.get("cloned_appended")||(i.appendTo(this.tabsControls()),e.set("cloned_appended",!0)):i.appendTo(this.tabsControls()),this.changed(),!0},cloneTabAfter:function(e){this.$tabs.find("> .wpb_wrapper > .wpb_tabs_nav > div").remove(),this.buildTabs(e)},updateIfExistTab:function(e){var t=this.tabsControls().find("[data-m-id="+e.get("id")+"]");return t.length?(t.attr("aria-controls","tab-"+e.getParam("tab_id")).find("a").attr("href","#tab-"+e.getParam("tab_id")).text(e.getParam("title")),!0):!1},buildControlHtml:function(t){var i=(t.get("params"),e('<li data-m-id="'+t.get("id")+'"><a href="#tab-'+t.getParam("tab_id")+'"></a></li>'));return i.data("model",t),i.find("> a").text(t.getParam("title")),i},addElement:function(e){e&&e.preventDefault(),(new vc.ShortcodesBuilder).create({shortcode:"vc_tab",params:{tab_id:vc_guid()+"-"+this.tabsControls().find("li").length,title:this.getDefaultTabTitle()},parent_id:this.model.get("id")}).render()},getDefaultTabTitle:function(){return window.i18nLocale.tab},setSorting:function(){this.hasUserAccess()&&vc.frame_window.vc_iframe.setTabsSorting(this)},stopSorting:function(){this.tabsControls().find("> li").each(function(t){var i=e(this).data("model");i.save({order:t},{silent:!0})})},placeElement:function(e){var t=vc.shortcodes.get(e.data("modelId"));t&&t.get("place_after_id")?(e.insertAfter(vc.$page.find("[data-model-id="+t.get("place_after_id")+"]")),t.unset("place_after_id")):e.insertAfter(this.tabsControls()),this.changed()},removeTab:function(e){if(1==vc.shortcodes.where({parent_id:this.model.get("id")}).length)return this.model.destroy();var t=this.tabsControls().find("[data-m-id="+e.get("id")+"]"),i=t.index();this.tabsControls().find("[data-m-id]:eq("+(i+1)+")").length?vc.frame_window.vc_iframe.setActiveTab(this.$tabs,i+1):this.tabsControls().find("[data-m-id]:eq("+(i-1)+")").length?vc.frame_window.vc_iframe.setActiveTab(this.$tabs,i-1):vc.frame_window.vc_iframe.setActiveTab(this.$tabs,0),t.remove()},clone:function(e){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){e.set("active_before_cloned",this.active_model_id===e.get("id"))},this),window.InlineShortcodeView_vc_tabs.__super__.clone.call(this,e)}}),window.InlineShortcodeView_vc_tour=window.InlineShortcodeView_vc_tabs.extend({render:function(){return _.bindAll(this,"stopSorting"),this.$tabs=this.$el.find("> .wpb_tour"),window.InlineShortcodeView_vc_tabs.__super__.render.call(this),this.buildNav(),this},beforeUpdate:function(){this.$tabs.find(".wpb_tour_heading,.wpb_tour_next_prev_nav").remove(),vc.frame_window.vc_iframe.destroyTabs(this.$tabs)},updated:function(){this.$tabs.find(".wpb_tour_next_prev_nav").appendTo(this.$tabs),window.InlineShortcodeView_vc_tour.__super__.updated.call(this)}}),window.InlineShortcodeView_vc_tab=window.InlineShortcodeViewContainerWithParent.extend({controls_selector:"#vc_controls-template-vc_tab",render:function(){var e,t,i;return i=this.model.get("params"),window.InlineShortcodeView_vc_tab.__super__.render.call(this),this.$tab=this.$el.find("> :first"),_.isEmpty(i.tab_id)?(i.tab_id=vc_guid()+"-"+Math.floor(11*Math.random()),this.model.save("params",i),e="tab-"+i.tab_id,this.$tab.attr("id",e)):e=this.$tab.attr("id"),this.$el.attr("id",e),this.$tab.attr("id",e+"-real"),this.$tab.find(".vc_element[data-tag]").length||this.$tab.html(""),this.$el.addClass("ui-tabs-panel wpb_ui-tabs-hide"),this.$tab.removeClass("ui-tabs-panel wpb_ui-tabs-hide"),this.parent_view&&this.parent_view.addTab&&(this.parent_view.addTab(this.model)||this.$el.removeClass("wpb_ui-tabs-hide")),t=this.doSetAsActive(),this.parent_view.buildTabs(t),this},doSetAsActive:function(){var e=this.model.get("active_before_cloned");return(this.model.get("from_content")||this.model.get("default_content")||!_.isUndefined(e))&&(_.isUndefined(e)||(this.model.unset("active_before_cloned"),e!==!0))?!1:this.model},removeView:function(e){window.InlineShortcodeView_vc_tab.__super__.removeView.call(this,e),this.parent_view&&this.parent_view.removeTab&&this.parent_view.removeTab(e)},clone:function(e){_.isObject(e)&&e.preventDefault()&&e.stopPropagation(),vc.clone_index=vc.clone_index/10;var t=this.model.clone(),i=(t.get("params"),new vc.ShortcodesBuilder),n=vc.CloneModel(i,this.model,this.model.get("parent_id")),o=(this.parent_view.active_model_id,this);i.render(function(){o.parent_view.cloneTabAfter&&o.parent_view.cloneTabAfter(n)})},rowsColumnsConverted:function(){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()})}}),window.InlineShortcodeView_vc_accordion=window.InlineShortcodeView_vc_row.extend({events:{"click > .wpb_accordion > .vc_empty-element":"addElement"},render:function(){return _.bindAll(this,"stopSorting"),this.$accordion=this.$el.find("> .wpb_accordion"),window.InlineShortcodeView_vc_accordion.__super__.render.call(this),this},changed:function(){0==this.$el.find(".vc_element[data-tag]").length?this.$el.addClass("vc_empty").find("> :first").addClass("vc_empty-element"):(this.$el.removeClass("vc_empty").find("> .vc_empty-element").removeClass("vc_empty-element"),this.setSorting())},buildAccordion:function(e){var t=!1;e&&(t=this.$accordion.find("[data-model-id="+e.get("id")+"]").index()),vc.frame_window.vc_iframe.buildAccordion(this.$accordion,t)},setSorting:function(){vc.frame_window.vc_iframe.setAccordionSorting(this)},beforeUpdate:function(){this.$el.find(".wpb_accordion_heading").remove(),window.InlineShortcodeView_vc_accordion.__super__.beforeUpdate.call(this)},stopSorting:function(){this.$accordion.find("> .wpb_accordion_wrapper > .vc_element[data-tag]").each(function(){var t=vc.shortcodes.get(e(this).data("modelId"));t.save({order:e(this).index()},{silent:!0})})},addElement:function(e){e&&e.preventDefault(),(new vc.ShortcodesBuilder).create({shortcode:"vc_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.get("id")}).render()},rowsColumnsConverted:function(){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()})}}),window.InlineShortcodeView_vc_accordion_tab=window.InlineShortcodeView_vc_tab.extend({events:{"click > .vc_controls .vc_element .vc_control-btn-delete":"destroy","click > .vc_controls .vc_element .vc_control-btn-edit":"edit","click > .vc_controls .vc_element .vc_control-btn-clone":"clone","click > .vc_controls .vc_element .vc_control-btn-prepend":"prependElement","click > .vc_controls .vc_control-btn-append":"appendElement","click > .vc_controls .vc_parent .vc_control-btn-delete":"destroyParent","click > .vc_controls .vc_parent .vc_control-btn-edit":"editParent","click > .vc_controls .vc_parent .vc_control-btn-clone":"cloneParent","click > .vc_controls .vc_parent .vc_control-btn-prepend":"addSibling","click > .wpb_accordion_section > .vc_empty-element":"appendElement","click > .vc_controls .vc_control-btn-switcher":"switchControls",mouseenter:"resetActive",mouseleave:"holdActive"},changed:function(){0==this.$el.find(".vc_element[data-tag]").length?(this.$el.addClass("vc_empty"),this.content().addClass("vc_empty-element")):(this.$el.removeClass("vc_empty"),this.content().removeClass("vc_empty-element"))},render:function(){return window.InlineShortcodeView_vc_tab.__super__.render.call(this),this.content().find(".vc_element[data-tag]").length||this.content().html(""),this.parent_view.buildAccordion(this.model.get("from_content")||this.model.get("default_content")?!1:this.model),this},rowsColumnsConverted:function(){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()})},destroy:function(e){var t=this.model.get("parent_id");window.InlineShortcodeView_vc_accordion_tab.__super__.destroy.call(this,e),vc.shortcodes.where({parent_id:t}).length||vc.shortcodes.get(t).destroy()}}),vc.cloneMethod_vc_tab=function(e,t){return e.params=_.extend({},e.params),e.params.tab_id=vc_guid()+"-cl",_.isUndefined(t.get("active_before_cloned"))||(e.active_before_cloned=t.get("active_before_cloned")),e},window.InlineShortcodeView_vc_pie=window.InlineShortcodeView.extend({render:function(){return _.bindAll(this,"parentChanged"),window.InlineShortcodeView_vc_pie.__super__.render.call(this),this.unbindResize(),vc.frame_window.vc_iframe.addActivity(function(){this.vc_iframe.vc_pieChart()}),this},unbindResize:function(){vc.frame_window.jQuery(vc.frame_window).unbind("resize.vcPieChartEditable")},parentChanged:function(){this.$el.find(".vc_pie_chart").removeClass("vc_ready"),vc.frame_window.vc_pieChart()},rowsColumnsConverted:function(){window.setTimeout(this.parentChanged,200),this.parentChanged()}}),window.InlineShortcodeView_vc_round_chart=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_round_chart.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity(function(){this.vc_round_charts(e)}),this},parentChanged:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_round_chart.__super__.parentChanged.call(this),_.defer(function(){vc.frame_window.vc_round_charts(e)}),this},remove:function(){var e=this.$el.find(".vc_round-chart").data("vcChartId");window.InlineShortcodeView_vc_round_chart.__super__.remove.call(this),e&&void 0!==vc.frame_window.Chart.instances[e]&&delete vc.frame_window.Chart.instances[e]}}),window.InlineShortcodeView_vc_line_chart=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_line_chart.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity(function(){this.vc_line_charts(e)}),this},parentChanged:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_line_chart.__super__.parentChanged.call(this),_.defer(function(){vc.frame_window.vc_line_charts(e)}),this},remove:function(){var e=this.$el.find(".vc_line-chart").data("vcChartId");window.InlineShortcodeView_vc_line_chart.__super__.remove.call(this),e&&void 0!==vc.frame_window.Chart.instances[e]&&delete vc.frame_window.Chart.instances[e]}}),window.InlineShortcodeView_vc_images_carousel=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_images_carousel.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity(function(){this.vc_iframe.vc_imageCarousel(e)}),this}}),window.InlineShortcodeView_vc_carousel=window.InlineShortcodeView_vc_images_carousel.extend({}),window.InlineShortcodeView_vc_gallery=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_gallery.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity(function(){this.vc_iframe.vc_gallery(e)}),this},parentChanged:function(){window.InlineShortcodeView_vc_gallery.__super__.parentChanged.call(this),vc.frame_window.vc_iframe.vc_gallery(this.model.get("id"))}}),window.InlineShortcodeView_vc_posts_slider=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_posts_slider.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity(function(){this.vc_iframe.vc_postsSlider(e)}),this}}),window.InlineShortcodeView_vc_toggle=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_toggle.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity(function(){this.vc_iframe.vc_toggle(e)}),this}}),window.InlineShortcodeView_vc_flickr=window.InlineShortcodeView.extend({render:function(){window.InlineShortcodeView_vc_flickr.__super__.render.call(this);var e=this.$el.find(".vc_flickr-inline-placeholder");return vc.frame_window.vc_iframe.addActivity(function(){this.vc_iframe.vc_Flickr(e)}),this}}),window.InlineShortcodeView_vc_raw_js=window.InlineShortcodeView.extend({render:function(){window.InlineShortcodeView_vc_raw_js.__super__.render.call(this);var e=this.$el.find(".vc_js_inline_holder").val();return this.$el.find(".wpb_wrapper").html(e),this}}),vc.addTemplateFilter(function(e){var t=VCS4()+"-"+VCS4();return e.replace(/tab\_id\=\"([^\"]+)\"/g,'tab_id="$1'+t+'"')}),window.InlineShortcodeView_vc_basic_grid=vc.shortcode_view.extend({render:function(e){return window.InlineShortcodeView_vc_basic_grid.__super__.render.call(this,e),this.initGridJs(!0),this},parentChanged:function(){window.InlineShortcodeView_vc_basic_grid.__super__.parentChanged.call(this),this.initGridJs()},initGridJs:function(e){var t=this.model;return!0===t.get("grid_activity")?!1:(t.set("grid_activity",!0),void(!0===e?vc.frame_window.vc_iframe.addActivity(function(){this.vc_iframe.gridInit(t.get("id")),t.set("grid_activity",!1)}):(vc.frame_window.vc_iframe.gridInit(t.get("id")),t.set("grid_activity",!1))))}}),window.InlineShortcodeView_vc_masonry_grid=window.InlineShortcodeView_vc_basic_grid.extend(),window.InlineShortcodeView_vc_media_grid=window.InlineShortcodeView_vc_basic_grid.extend(),window.InlineShortcodeView_vc_masonry_media_grid=window.InlineShortcodeView_vc_basic_grid.extend(),window.InlineShortcodeView_vc_tta_accordion=window.InlineShortcodeViewContainer.extend({events:{},childTag:"vc_tta_section",activeClass:"vc_active",defaultSectionTitle:window.i18nLocale.section,initialize:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.initialize.call(this)},render:function(){return window.InlineShortcodeViewContainer.__super__.render.call(this),_.bindAll(this,"buildSortable","updateSorting"),this.content(),this.buildPagination(),this},addControls:function(){return this.$controls=e('<div class="no-controls"></div>'),this.$controls.appendTo(this.$el),this},addElement:function(t){t&&t.preventDefault(),this.addSection("parent.prepend"===e(t.currentTarget).data("vcControl"))},appendElement:function(e){return this.addElement(e)},prependElement:function(e){return this.addElement(e)},addSection:function(e){var t={shortcode:this.childTag,parent_id:this.model.get("id"),isActiveSection:!0,params:{title:this.defaultSectionTitle}};e&&(vc.activity="prepend",t.order=this.getSiblingsFirstPositionIndex()),vc.builder.create(t).render()},getSiblingsFirstPositionIndex:function(){var e,t;return e=0,t=vc.shortcodes.sort().findWhere({parent_id:this.model.get("id")}),t&&(e=t.get("order")-1),e},changed:function(){vc.frame_window.vc_iframe.buildTTA(),window.InlineShortcodeView_vc_tta_accordion.__super__.changed.call(this),_.defer(this.buildSortable),this.buildPagination()},updated:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.updated.call(this),_.defer(this.buildSortable),this.buildPagination()},buildSortable:function(){this.$el&&this.$el.find(".vc_tta-panels").sortable({forcePlaceholderSize:!0,placeholder:"vc_placeholder-row",start:this.startSorting,over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()}),t.placeholder.removeClass("vc_hidden-placeholder")},items:"> .vc_element",handle:".vc_tta-panel-heading, .vc_child-element-move",update:this.updateSorting})},startSorting:function(e,t){t.placeholder.width(t.item.width())},updateSorting:function(){var t=this;this.getPanelsList().find("> .vc_element").each(function(){var i,n,o;o=e(this),n=o.data("modelId"),i=vc.shortcodes.get(n),i.save({order:t.getIndex(o)},{silent:!0})}),this.buildPagination()},getIndex:function(e){return e.index()},getPanelsList:function(){return this.$el.find(".vc_tta-panels")},parentChanged:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.parentChanged.call(this),"undefined"!=typeof vc.frame_window.vc_round_charts&&vc.frame_window.vc_round_charts(this.model.get("id")),"undefined"!=typeof vc.frame_window.vc_line_charts&&vc.frame_window.vc_line_charts(this.model.get("id"))},buildPagination:function(){},removePagination:function(){this.$el.find(".vc_tta-panels-container").find(" > .vc_pagination").remove()},getPaginationList:function(){var t,i,n,o,c,a;return a=this.model.get("params"),!_.isUndefined(a.pagination_style)&&a.pagination_style.length?(t=this.$el.find("[data-vc-accordion]"),i=[],i.push("vc_general"),i.push("vc_pagination"),n=a.pagination_style.split("-"),i.push("vc_pagination-style-"+n[0]),i.push("vc_pagination-shape-"+n[1]),!_.isUndefined(a.pagination_color)&&a.pagination_color.length&&i.push("vc_pagination-color-"+a.pagination_color),c=[],c.push('<ul class="'+i.join(" ")+'">'),o=this,t.each(function(){var t,i,n,a,r,d;n=e(this),a=n.closest(".vc_tta-panel"),i=a.hasClass(o.activeClass),t=["vc_pagination-item"],i&&t.push(o.activeClass),r=n.attr("href"),0!==r.indexOf("#")&&(r=""),n.attr("data-vc-target")&&(r=n.attr("data-vc-target")),d='<a href="javascript:;" data-vc-target="'+r+'" class="vc_pagination-trigger" data-vc-tabs data-vc-container=".vc_tta"></a>',c.push('<li class="'+t.join(" ")+'" data-vc-tab>'+d+"</li>")}),c.push("</ul>"),e(c.join(""))):null}}),window.InlineShortcodeView_vc_tta_tabs=window.InlineShortcodeView_vc_tta_accordion.extend({render:function(){return window.InlineShortcodeView_vc_tta_tabs.__super__.render.call(this),_.bindAll(this,"buildSortableNavigation","updateSortingNavigation"),this.createTabs(),_.defer(this.buildSortableNavigation),this},createTabs:function(){var e=_.sortBy(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){return e.get("order")});_.each(e,function(e){this.sectionUpdated(e,!0)},this)},defaultSectionTitle:window.i18nLocale.tab,addIcon:function(e,t){var i,n,o;return"true"===e.getParam("add_icon")&&(i=e.getParam("i_icon_"+e.getParam("i_type")),_.isUndefined(i)||(n="vc_tta-icon "+i,o='<i class="'+n+'"></i>'),"right"===e.getParam("i_position")?t+=o:t=o+t),t},sectionUpdated:function(t,i){var n,o,c,a,r,d,s,l;if(l=!1,c=t.get("id"),o=this.$el.find(".vc_tta-tabs-container .vc_tta-tabs-list"),n=o.find('[data-vc-target="[data-model-id='+c+']"]'),r=t.getParam("title"),n.length)a='<span class="vc_tta-title-text">'+r+"</span>",a=this.addIcon(t,a),n.html(a);else{var h;a='<span class="vc_tta-title-text">'+r+"</span>",a=this.addIcon(t,a),h=e('<li class="vc_tta-tab" data-vc-target-model-id="'+c+'" data-vc-tab><a href="javascript:;" data-vc-use-cache="false" data-vc-tabs data-vc-target="[data-model-id='+c+']" data-vc-container=".vc_tta">'+a+"</a></li>"),!0!==i&&(d=_.pluck(_.sortBy(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){return e.get("order")}),"id"),s=d.indexOf(t.get("id"))-1,s>-1&&o.find("[data-vc-tab]:eq("+s+")").length&&(h.insertAfter(o.find("[data-vc-tab]:eq("+s+")")),l=!0)),!l&&h.appendTo(o),t.get("isActiveSection")&&h.addClass(this.activeClass)}this.buildPagination()},getNextTab:function(e){var t,i,n,o;return o=this.$el.find(".vc_tta-tabs-container .vc_tta-tabs-list").children(),t=o.length-1,i=e.index(),n=o.eq(i!==t?i+1:i-1)},removeSection:function(e){var t,i,n;t=this.$el.find('.vc_tta-tabs-container .vc_tta-tabs-list [data-vc-target="[data-model-id='+e+']"]').parent(),n=t.hasClass(this.activeClass),n&&(i=this.getNextTab(t),vc.frame_window.jQuery(i).find("[data-vc-target]").trigger("click")),t.remove(),this.buildPagination()
},buildSortableNavigation:function(){this.$el.find(".vc_tta-tabs-container .vc_tta-tabs-list").sortable({items:".vc_tta-tab",forcePlaceholderSize:!0,placeholder:"vc_tta-tab vc_placeholder-tta-tab",helper:this.renderSortingHelper,start:function(e,t){t.placeholder.width(t.item.width())},over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()}),t.placeholder.removeClass("vc_hidden-placeholder")},update:this.updateSortingNavigation})},updateSorting:function(e,t){window.InlineShortcodeView_vc_tta_tabs.__super__.updateSorting.call(this,e,t),this.updateTabsPositions(this.getPanelsList())},updateSortingNavigation:function(){var t,i;i=this,t=this.$el.find(".vc_tta-tabs-list"),t.find("> .vc_tta-tab").each(function(){var t,n,o;o=e(this).removeAttr("style"),n=o.data("vcTargetModelId"),t=vc.shortcodes.get(n),t.save({order:i.getIndex(o)},{silent:!0})}),this.updatePanelsPositions(t)},updateTabsPositions:function(e){var t,i,n;t=this.$el.find(".vc_tta-tabs-list"),t.length&&(i=[],n=e.sortable("toArray",{attribute:"data-model-id"}),_.each(n,function(e){i.push(t.find('[data-vc-target-model-id="'+e+'"]'))},this),t.prepend(i)),this.buildPagination()},updatePanelsPositions:function(e){var t,i,n;n=this.getPanelsList(),t=[],i=e.sortable("toArray",{attribute:"data-vc-target-model-id"}),_.each(i,function(e){t.push(n.find('[data-model-id="'+e+'"]'))},this),n.prepend(t),this.buildPagination()},renderSortingHelper:function(e,t){var i,n,o;return i=t,n=t.width()+1,o=t.height(),i.width(n),i.height(o),i},buildPagination:function(){var e;this.removePagination(),e=this.model.get("params"),!_.isUndefined(e.pagination_style)&&e.pagination_style.length&&("top"===e.tab_position?this.$el.find(".vc_tta-panels-container").append(this.getPaginationList()):this.getPaginationList().insertBefore(this.$el.find(".vc_tta-container .vc_tta-panels")))}}),window.InlineShortcodeView_vc_tta_tour=window.InlineShortcodeView_vc_tta_tabs.extend({defaultSectionTitle:window.i18nLocale.section,buildPagination:function(){this.removePagination();var e=this.model.get("params");!_.isUndefined(e.pagination_style)&&e.pagination_style.length&&this.$el.find(".vc_tta-panels-container").append(this.getPaginationList())}}),vc.ttaSectionActivateOnClone=!1,window.InlineShortcodeView_vc_tta_section=window.InlineShortcodeViewContainerWithParent.extend({events:{'click > .vc_controls [data-vc-control="destroy"]':"destroy",'click > .vc_controls [data-vc-control="edit"]':"edit",'click > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="prepend"]':"prependElement",'click > .vc_controls [data-vc-control="append"]':"appendElement",'click > .vc_controls [data-vc-control="parent.destroy"]':"destroyParent",'click > .vc_controls [data-vc-control="parent.edit"]':"editParent",'click > .vc_controls [data-vc-control="parent.clone"]':"cloneParent",'click > .vc_controls [data-vc-control="parent.append"]':"addSibling","click .vc_tta-panel-body > [data-js-panel-body].vc_empty-element":"appendElement","click > .vc_controls .vc_control-btn-switcher":"switchControls",mouseenter:"resetActive",mouseleave:"holdActive"},controls_selector:"#vc_controls-template-vc_tta_section",previousClasses:!1,activeClass:"vc_active",render:function(){var e=this.model;return window.InlineShortcodeView_vc_tta_section.__super__.render.call(this),_.bindAll(this,"bindAccordionEvents"),this.refreshContent(),this.moveClasses(),_.defer(this.bindAccordionEvents),this.isAsActiveSection()&&window.vc.frame_window.vc_iframe.addActivity(function(){var t=window.vc.frame_window.jQuery('[data-vc-accordion][data-vc-target="[data-model-id='+e.get("id")+']"]');t.trigger("click")}),this},clone:function(e){vc.ttaSectionActivateOnClone=!0,window.InlineShortcodeView_vc_tta_section.__super__.clone.call(this,e)},addSibling:function(e){window.InlineShortcodeView_vc_tta_section.__super__.addSibling.call(this,e)},parentChanged:function(){return window.InlineShortcodeView_vc_tta_section.__super__.parentChanged.call(this),this.refreshContent(!0),this},changed:function(){0===this.$el.find(".vc_element[data-tag]").length?this.$el.addClass("vc_empty").find(".vc_tta-panel-body > [data-js-panel-body]").addClass("vc_empty-element"):this.$el.removeClass("vc_empty").find(".vc_tta-panel-body > [data-js-panel-body].vc_empty-element").removeClass("vc_empty-element")},moveClasses:function(){var e;this.previousClasses&&(this.$el.get(0).className=this.$el.get(0).className.replace(this.previousClasses,"")),e=this.$el.find(".vc_tta-panel").get(0).className,this.$el.attr("data-vc-content",this.$el.find(".vc_tta-panel").data("vcContent")),this.previousClasses=e,this.$el.find(".vc_tta-panel").get(0).className="",this.$el.get(0).className=this.$el.get(0).className+" "+this.previousClasses,this.$el.find(".vc_tta-panel-title [data-vc-target]").attr("data-vc-target","[data-model-id="+this.model.get("id")+"]")},refreshContent:function(t){var i,n,o,c,a;o=vc.shortcodes.get(this.model.get("parent_id")),_.isObject(o)&&(a=vc.getDefaultsAndDependencyMap(o.get("shortcode")),c=_.extend({},a.defaults,o.get("params")),i=this.$el.find(".vc_tta-controls-icon"),c&&!_.isUndefined(c.c_icon)&&c.c_icon.length>0?(i.length?i.attr("data-vc-tta-controls-icon",c.c_icon):this.$el.find("[data-vc-tta-controls-icon-wrapper]").append(e('<i class="vc_tta-controls-icon" data-vc-tta-controls-icon="'+c.c_icon+'"></i>')),!_.isUndefined(c.c_position)&&c.c_position.length>0&&(n=this.$el.find("[data-vc-tta-controls-icon-position]"),n.length&&n.attr("data-vc-tta-controls-icon-position",c.c_position))):(i.remove(),this.$el.find("[data-vc-tta-controls-icon-position]").attr("data-vc-tta-controls-icon-position","")),!0!==t&&o.view&&o.view.sectionUpdated&&o.view.sectionUpdated(this.model))},setAsActiveSection:function(e){this.model.set("isActiveSection",!!e)},isAsActiveSection:function(){return!!this.model.get("isActiveSection")},bindAccordionEvents:function(){var e=this;window.vc.frame_window.jQuery('[data-vc-target="[data-model-id='+this.model.get("id")+']"]').on("show.vc.accordion hide.vc.accordion",function(t){e.setAsActiveSection("show"===t.type)})},destroy:function(e){var t,i;i=this.model.get("parent_id"),window.InlineShortcodeView_vc_tta_section.__super__.destroy.call(this,e),t=vc.shortcodes.get(i),vc.shortcodes.where({parent_id:i}).length?t.view&&t.view.removeSection&&t.view.removeSection(this.model.get("id")):t.destroy()}});var t=function(e){var t="vc_tta_section";vc.events.on("shortcodes:"+t+":add:parent:"+e.get("id"),function(e){var t,i,n;return n=vc.shortcodes.get(e.get("parent_id")),t=parseInt(n.getParam("active_section")),void 0===t&&(t=1),i=_.pluck(_.sortBy(vc.shortcodes.where({parent_id:n.get("id")}),function(e){return e.get("order")}),"id"),i.indexOf(e.get("id"))===t-1&&e.set("isActiveSection",!0),e}),vc.events.on("shortcodes:"+t+":clone:parent:"+e.get("id"),function(e){vc.ttaSectionActivateOnClone&&e.set("isActiveSection",!0),vc.ttaSectionActivateOnClone=!1})};vc.events.on("shortcodes:vc_tta_accordion:add",t),vc.events.on("shortcodes:vc_tta_tabs:add",t),vc.events.on("shortcodes:vc_tta_tour:add",t),vc.events.on("shortcodeView:updated",function(e){var t,i;i=vc.map[e.get("shortcode")]||!1,!0===i.is_container&&(t=e.get("id"),vc.frame_window.vc_iframe.updateChildGrids(t))})}(window.jQuery);