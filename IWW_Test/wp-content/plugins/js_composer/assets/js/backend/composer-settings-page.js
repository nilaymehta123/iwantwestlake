jQuery(document).ready(function(e){e(".wpb_settings_accordion").accordion({active:getCookie("wpb_js_composer_settings_group_tab")?getCookie("wpb_js_composer_settings_group_tab"):!1,collapsible:!0,change:function(e,t){void 0!==t.newHeader.attr("id")?setCookie("wpb_js_composer_settings_group_tab","#"+t.newHeader.attr("id"),31536e3):setCookie("wpb_js_composer_settings_group_tab","",31536e3)},heightStyle:"content"}),e(".wpb-settings-select-all-shortcodes").click(function(t){t.preventDefault(),e(this).parent().parent().find("[type=checkbox]").attr("checked",!0)}),e(".wpb-settings-select-none-shortcodes").click(function(t){t.preventDefault(),e(this).parent().parent().find("[type=checkbox]").removeAttr("checked")}),e(".vc_settings-tab-control").click(function(t){if(t.preventDefault(),e(this).hasClass("nav-tab-active"))return!1;var s=e(this).attr("href");e(".vc_settings-tabs > .nav-tab-active").removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),e(".vc_settings-tab-content").hide().removeClass("vc_settings-tab-content-active"),e(s).fadeIn(400,function(){e(this).addClass("vc_settings-tab-content-active"),window.css_editor&&window.css_editor.focus()})}),e(".vc_settings-tab-content").submit(function(){return!0}),e("#vc_settings-disable-notification-button").click(function(t){t.preventDefault(),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_remove_settings_notification_element_css_class"}}),e(this).remove()}),e(".vc_show_example").click(function(t){t.preventDefault();var s=e(".vc_helper");return s.is(":animated")?!1:void s.toggle(100)}),e("#vc_settings-custom-css-reset-data").click(function(t){t.preventDefault(),confirm(window.i18nLocaleSettings.are_you_sure_reset_css_classes)&&(e("#vc_settings-element_css-action").val("remove_all_css_classes"),e("#vc_settings-element_css").attr("action",window.location.href).trigger("submit"))}),e(".color-control").wpColorPicker(),e("#vc_settings-color-restore-default").click(function(t){t.preventDefault(),confirm(window.i18nLocaleSettings.are_you_sure_reset_color)&&(e("#vc_settings-color-action").val("restore_color"),e("#vc_settings-color").attr("action",window.location.href).find("[type=submit]").click())}),e("#wpb_js_use_custom").change(function(){e(this).is(":checked")?e("#vc_settings-color").addClass("color_enabled"):e("#vc_settings-color").removeClass("color_enabled")});var t=function(){e("#vc_settings-updater [type=submit]").attr("disabled",!1)},s=function(){e("#vc_settings-updater [type=submit]").attr("disabled",!0)};e("#vc_settings-activate-license").click(function(a){var i=e(this),n=e("[name=wpb_js_envato_username]"),c=e("[name=wpb_js_js_composer_purchase_code]"),o=e("#vc_settings-license-status").val(),r=e("[name=wpb_js_envato_api_key]"),l='<div id="vc_license-activation-message" class="updated vc_updater-result-message hidden"><p><strong>{message}</strong></p></div>';return i.attr("disabled")===!0?!1:(i.attr("disabled",!0),e(".form-invalid").removeClass("form-invalid"),e("#vc_license-activation-message").remove(),a.preventDefault(),e("#vc_updater-spinner").show(),void e.ajax({type:"POST",url:window.ajaxurl,dataType:"json",data:{action:"activated"===o?"wpb_deactivate_license":"wpb_activate_license",username:n.val(),key:c.val(),api_key:r.val()}}).done(function(a){var d;a.result&&"activated"!==o?(e("#vc_settings-license-status").val("activated"),c.addClass("vc_updater-passive").attr("disabled",!0),n.addClass("vc_updater-passive").attr("disabled",!0),r.addClass("vc_updater-passive").attr("disabled",!0),e("#vc_settings-activate-license").html(i18nLocaleSettings.vc_updater_deactivate_license),l=l.replace("{message}",i18nLocaleSettings.vc_updater_license_activation_success),s()):a.result&&"activated"===o?(e("#vc_settings-license-status").val("not_activated"),c.removeClass("vc_updater-passive").attr("disabled",!1),n.removeClass("vc_updater-passive").attr("disabled",!1),r.removeClass("vc_updater-passive").attr("disabled",!1),e("#vc_settings-activate-license").html(i18nLocaleSettings.vc_updater_activate_license),l=l.replace("{message}",i18nLocaleSettings.vc_updater_license_deactivation_success),t()):(l=l.replace("updated","error"),d="undefined"==typeof a.code?parseInt(a.code):300,100===a.code?(l=l.replace("{message}",i18nLocaleSettings.vc_updater_empty_data),c.closest("tr").addClass("form-invalid"),n.closest("tr").addClass("form-invalid")):200===a.code?(l=l.replace("{message}",i18nLocaleSettings.vc_updater_wrong_license_key),c.closest("tr").addClass("form-invalid")):300===a.code?l=l.replace("{message}",i18nLocaleSettings.vc_updater_wrong_data):401===a.code?l=l.replace("{message}",i18nLocaleSettings.vc_updater_already_activated):402===a.code?(l=l.replace("{message}",i18nLocaleSettings.vc_updater_already_activated_another_url).replace("{site}",a.activated_url),c.closest("tr").addClass("form-invalid")):l=500===a.code?l.replace("{message}",i18nLocaleSettings.vc_deactivation):a.message?l.replace("{message}",i18nLocaleSettings[a.message]):l.replace("{message}",i18nLocaleSettings.vc_updater_error)),e(l).insertAfter("#vc_settings-activate-license").fadeIn(100),i.attr("disabled",!1),e("#vc_updater-spinner").hide()}).error(function(){e(l.replace("{message}",i18nLocaleSettings.vc_updater_error)).insertAfter("#vc_settings-activate-license").show(100),e("#vc_updater-spinner").hide(),i.attr("disabled",!1)}))});var a=e("#wpb_csseditor"),i=e("textarea.custom_css.wpb_csseditor");a.length&&(window.css_editor=new Vc_postSettingsEditor,window.css_editor.setEditor(i.val()),window.css_editor.getEditor().on("change",function(){i.val(window.css_editor.getValue())})),e("#vc_settings-vc-pointers-reset").click(function(t){t.preventDefault(),e.post(window.ajaxurl,{action:"vc_pointer_reset"}),e(this).text(e(this).data("vcDoneTxt"))});var n=function(t,s,a,i){i&&e(".vc_atm-message").remove();var n=e('<div class="vc_atm-message '+(s?s:"")+'" style="display: none;"><p></p></div>');return n.find("p").text(t),_.isUndefined(a)||window.setTimeout(function(){n.fadeOut(500,function(){e(this).remove()})},a),n},c=!1;e("#vc_settings-color").submit(function(t){if(t.preventDefault(),!c){var s,a,i;if(s=this,a=e("#submit_btn"),i=e("#wpb_js_use_custom"),"checked"===i.attr("checked")&&"restore_color"!==e("#vc_settings-color-action").val()){var o,r,l;c=!0,o=e(s).serializeArray(),r=a.data("vc-less-variables"),l=e('<span class="vc_settings-less-spinner"></span>');var d=ajaxurl.replace(/admin\-ajax\.php/,"images/wpspin_light.gif");e('<img src="'+d+'" />').appendTo(l),a.val(window.i18nLocaleSettings.saving),l.insertBefore(a).show(),_.delay(function(){vc.less.build({modifyVars:o,variablesDataLinker:r,lessPath:a.data("vc-less-path"),rootpath:a.data("vc-less-root")},function(t,s){if(_.isUndefined(t)||_.isUndefined(t.css))_.isUndefined(s)||(window.console&&window.console.error&&window.console.error(s),n(window.i18nLocaleSettings.save_error+". "+s,"error",void 0,!0).insertBefore(a.parent()).fadeIn(500),a.val(window.i18nLocaleSettings.save),c=!1,l.remove());else{e('[name="wpb_js_compiled_js_composer_less"]').val(t.css);var i=e("#vc_settings-color");e.ajax({type:"POST",url:i.attr("action"),data:i.eq(0).serializeArray(),success:function(){n(window.i18nLocaleSettings.saved,"updated",5e3,!0).insertBefore(a.parent()).fadeIn(500),a.val(window.i18nLocaleSettings.save),c=!1,l.remove()},error:function(){n(window.i18nLocaleSettings.form_save_error,"error",void 0,!0).insertBefore(a.parent()).fadeIn(500),a.val(window.i18nLocaleSettings.save),c=!1,l.remove()}})}})},100)}else s.submit()}})});