!function(e){var t=vc.shortcodes;window.VcRowView=vc.shortcode_view.extend({change_columns_layout:!1,events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode","click > .vc_controls .set_columns":"setColumns",'click > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="move"]':"moveElement",'click > .vc_controls [data-vc-control="toggle"]':"toggleElement","click > .wpb_element_wrapper .vc_controls":"openClosedRow"},convertRowColumns:function(e){var n=e.toString().split(/_/),i=t.where({parent_id:this.model.id}),o=[],a=[],c="";return _.each(n,function(e,n){var s,r,l=_.map(e.toString().split(""),function(e){return parseInt(e,10)});c=l.length>3?l[0]+""+l[1]+"/"+l[2]+l[3]:l.length>2?l[0]+"/"+l[1]+l[2]:l[0]+"/"+l[1],a.push(c),s=_.extend(_.isUndefined(i[n])?{}:i[n].get("params"),{width:c}),vc.storage.lock(),r=t.create({shortcode:this.getChildTag(),params:s,parent_id:this.model.id}),_.isObject(i[n])&&_.each(t.where({parent_id:i[n].id}),function(e){vc.storage.lock(),e.save({parent_id:r.id}),vc.storage.lock(),e.trigger("change_parent_id")}),o.push(r)},this),n.length<i.length&&_.each(i.slice(n.length),function(e){_.each(t.where({parent_id:e.id}),function(e){vc.storage.lock(),e.save({parent_id:_.last(o).id}),vc.storage.lock(),e.trigger("change_parent_id")})}),_.each(i,function(e){vc.storage.lock(),e.destroy()},this),this.model.save(),this.setActiveLayoutButton(""+e),a},changeShortcodeParams:function(e){window.VcRowView.__super__.changeShortcodeParams.call(this,e),this.buildDesignHelpers()},buildDesignHelpers:function(){var t,n,i,o,a,c;t=this.model.getParam("css"),n=this.$el.find("> .controls .column_toggle"),this.$el.find("> .controls .vc_row_color").remove(),this.$el.find("> .controls .vc_row_image").remove(),c=t.match(/background\-image:\s*url\(([^\)]+)\)/),c&&!_.isUndefined(c[1])&&(i=c[1]),c=t.match(/background\-color:\s*([^\s\;]+)\b/),c&&!_.isUndefined(c[1])&&(o=c[1]),c=t.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),c&&!_.isUndefined(c[1])&&(o=c[1],i=c[2]),a=this.model.getParam("el_id"),this.$el.find("> .controls .vc_row-hash-id").remove(),_.isEmpty(a)||e('<span class="vc_row-hash-id"></span>').text("#"+a).insertAfter(n),i&&e('<span class="vc_row_image" style="background-image: url('+i+');" title="'+window.i18nLocale.row_background_image+'"></span>').insertAfter(n),o&&e('<span class="vc_row_color" style="background-color: '+o+'" title="'+window.i18nLocale.row_background_color+'"></span>').insertAfter(n)},addElement:function(e){e&&e.preventDefault(),t.create({shortcode:this.getChildTag(),params:{},parent_id:this.model.id}),this.setActiveLayoutButton(),this.$el.removeClass("vc_collapsed-row")},getChildTag:function(){return"vc_row_inner"===this.model.get("shortcode")?"vc_column_inner":"vc_column"},_getCurrentLayoutString:function(){var t=[];return e("> .wpb_vc_column, > .wpb_vc_column_inner",this.$content).each(function(){var n=e(this).data("width");t.push(n?n:"1/1")}),t.join(" + ")},sortingSelector:"> [data-element_type=vc_column], > [data-element_type=vc_column_inner]",setSorting:function(){var t=this;this.$content.find(this.sortingSelector).length>1?this.$content.removeClass("wpb-not-sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-column",tolerance:"pointer",cursor:"move",items:this.sortingSelector,distance:.5,start:function(t,n){e("#visual_composer_content").addClass("vc_sorting-started"),n.placeholder.width(n.item.width())},stop:function(){e("#visual_composer_content").removeClass("vc_sorting-started")},update:function(){var n=e(t.sortingSelector,t.$content);n.each(function(){var t=e(this).data("model"),i=e(this).index();t.set("order",i),n.length-1>i&&vc.storage.lock(),t.save()})},over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()}),t.placeholder.removeClass("vc_hidden-placeholder")},beforeStop:function(){}}):(this.$content.hasClass("ui-sortable")&&this.$content.sortable("destroy"),this.$content.addClass("wpb-not-sortable"))},validateCellsList:function(e){var t,n=[],i=e.replace(/\s/g,"").split("+"),o=_.reduce(_.map(i,function(e){if(e.match(/^(vc_)?span\d?$/)){var i=vc_convert_column_span_size(e);return i===!1?1e3:(t=i.split(/\//),n.push(t[0]+""+t[1]),12*parseInt(t[0],10)/parseInt(t[1],10))}return e.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(t=e.split(/\//),n.push(t[0]+""+t[1]),12*parseInt(t[0],10)/parseInt(t[1],10)):1e4}),function(e,t){return t+=e},0);return 12!==o?!1:n.join("_")},setActiveLayoutButton:function(e){e||(e=_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){var t=e.getParam("width");return t?t.replace(/\//,""):"11"}).join("_")),this.$el.find("> .vc_controls .vc_active").removeClass("vc_active");var t=this.$el.find('> .controls [data-cells-mask="'+vc_get_column_mask(e)+'"] [data-cells="'+e+'"], > .vc_controls [data-cells-mask="'+vc_get_column_mask(e)+'"][data-cells="'+e+'"]');t.length?t.addClass("vc_active"):this.$el.find("> .controls [data-cells-mask=custom]").addClass("vc_active")},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutEditorPanelViewBackend({el:e("#vc_row-layout-panel")})),vc.row_layout_editor},setColumns:function(t){_.isObject(t)&&t.preventDefault();var n=e(t.currentTarget);if("custom"===n.data("cells"))this.layoutEditor().render(this.model).show();else{if(vc.is_mobile){var i=n.parent();i.hasClass("vc_visible")||(i.addClass("vc_visible"),e(document).bind("click.vcRowColumnsControl",function(){i.removeClass("vc_visible"),e(document).unbind("click.vcRowColumnsControl")}))}n.is(".vc_active")||(this.change_columns_layout=!0,_.defer(function(e,t){e.convertRowColumns(t)},this,n.data("cells")))}this.$el.removeClass("vc_collapsed-row")},sizeRows:function(){var t=45;e("> .wpb_vc_column, > .wpb_vc_column_inner",this.$content).each(function(){var n=e(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:0}).height();n>t&&(t=n)}).each(function(){e(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:t})})},ready:function(e){return window.VcRowView.__super__.ready.call(this,e),this},checkIsEmpty:function(){window.VcRowView.__super__.checkIsEmpty.call(this),this.setSorting()},changedContent:function(){return this.change_columns_layout?this:void this.setActiveLayoutButton()},moveElement:function(e){e.preventDefault()},toggleElement:function(e){e&&e.preventDefault(),this.$el.toggleClass("vc_collapsed-row")},openClosedRow:function(){this.$el.removeClass("vc_collapsed-row")},setParentSize:function(){if("vc_row_inner"===this.model.get("shortcode")){var e,t=this.$el.parents("[data-element_type=vc_row]:first");t.length&&(e=t.data("modelId"),e&&vc.app.views[e].sizeRows())}}}),window.VcColumnView=vc.shortcode_view.extend({events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode",'click > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},current_column_width:!1,initialize:function(e){window.VcColumnView.__super__.initialize.call(this,e),_.bindAll(this,"setDropable","dropButton")},ready:function(e){return window.VcColumnView.__super__.ready.call(this,e),this.setDropable(),this},render:function(){return window.VcColumnView.__super__.render.call(this),this.current_column_width=this.model.get("params").width||"1/1",this.$el.attr("data-width",this.current_column_width),this.setEmpty(),this},changeShortcodeParams:function(e){window.VcColumnView.__super__.changeShortcodeParams.call(this,e),this.setColumnClasses(),this.buildDesignHelpers()},designHelpersSelector:"> .vc_controls .column_add",buildDesignHelpers:function(){var t,n,i,o=this.model.getParam("css"),a=this.$el.find(this.designHelpersSelector).get(0);this.$el.find("> .vc_controls .vc_column_color").remove(),this.$el.find("> .vc_controls .vc_column_image").remove(),t=o.match(/background\-image:\s*url\(([^\)]+)\)/),t&&!_.isUndefined(t[1])&&(n=t[1]),t=o.match(/background\-color:\s*([^\s\;]+)\b/),t&&!_.isUndefined(t[1])&&(i=t[1]),t=o.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),t&&!_.isUndefined(t[1])&&(i=t[1],n=t[2]),n&&e('<span class="vc_column_image" style="background-image: url('+n+');" title="'+i18nLocale.column_background_image+'"></span>').insertBefore(a),i&&e('<span class="vc_column_color" style="background-color: '+i+'" title="'+i18nLocale.column_background_color+'"></span>').insertBefore(a)},setColumnClasses:function(){var e,t=this.model.getParam("offset")||"",n=this.model.getParam("width")||"1/1",i=this.convertSize(n);this.current_offset_class&&this.$el.removeClass(this.current_offset_class),this.current_column_width!==n&&(e=this.convertSize(this.current_column_width),this.$el.attr("data-width",n).removeClass(e).addClass(i),this.current_column_width=n),t.match(/vc_col\-sm\-\d+/)&&this.$el.removeClass(i),_.isEmpty(t)||this.$el.addClass(t),this.current_offset_class=t},addToEmpty:function(t){t.preventDefault(),e(t.target).hasClass("vc_empty-container")&&this.addElement(t)},setDropable:function(){return this.$content.droppable({greedy:!0,accept:"vc_column_inner"==this.model.get("shortcode")?".dropable_el":".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton}),this},dropButton:function(e,t){t.draggable.is("#wpb-add-new-element")?new vc.element_block_view({model:{position_to_add:"end"}}).show(this):t.draggable.is("#wpb-add-new-row")&&this.createRow()},setEmpty:function(){this.$el.addClass("vc_empty-column"),this.$content.addClass("vc_empty-container")},unsetEmpty:function(){this.$el.removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")},checkIsEmpty:function(){t.where({parent_id:this.model.id}).length?this.unsetEmpty():this.setEmpty(),window.VcColumnView.__super__.checkIsEmpty.call(this)},createRow:function(){var e=t.create({shortcode:"vc_row_inner",parent_id:this.model.id});return t.create({shortcode:"vc_column_inner",params:{width:"1/1"},parent_id:e.id}),e},convertSize:function(e){var t="vc_col-sm-",n=e?e.split("/"):[1,1],i=_.range(1,13),o=!_.isUndefined(n[0])&&_.indexOf(i,parseInt(n[0],10))>=0?parseInt(n[0],10):!1,a=!_.isUndefined(n[1])&&_.indexOf(i,parseInt(n[1],10))>=0?parseInt(n[1],10):!1;return o!==!1&&a!==!1?t+12*o/a:t+"12"},deleteShortcode:function(e){var t,n=this.model.get("parent_id");_.isObject(e)&&e.preventDefault();var i=confirm(window.i18nLocale.press_ok_to_delete_section);return i!==!0?!1:(this.model.destroy(),void(n&&!vc.shortcodes.where({parent_id:n}).length?(t=vc.shortcodes.get(n),_.contains(["vc_column","vc_column_inner"],t.get("shortcode"))||t.destroy()):n&&(t=vc.shortcodes.get(n),t&&t.view&&t.view.setActiveLayoutButton&&t.view.setActiveLayoutButton())))}}),window.VcAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{"click .add_tab":"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcAccordionView.__super__.render.call(this),this.hasUserAccess()?(this.$content.sortable({axis:"y",handle:"h3",stop:function(t,n){n.item.prev().triggerHandler("focusout"),e(this).find("> .wpb_sortable").each(function(){var t=e(this).data("model");t.save({order:e(this).index()})})}}),this):this},changeShortcodeParams:function(e){var t,n;window.VcAccordionView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),n=_.isString(t.collapsible)&&"yes"===t.collapsible?!0:!1,this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",n)},changedContent:function(e){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var t=_.isString(this.model.get("params").collapsible)&&"yes"===this.model.get("params").collapsible?!0:!1;this.$content.accordion({header:"h3",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:t,active:this.adding_new_tab===!1&&e.model.get("cloned")!==!0?0:e.$el.index()}),this.adding_new_tab=!1},addTab:function(e){return e.preventDefault(),this.hasUserAccess()?(this.adding_new_tab=!0,void vc.shortcodes.create({shortcode:"vc_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id})):!1},_loadDefaults:function(){window.VcAccordionView.__super__._loadDefaults.call(this)}}),window.VcAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(e){var t;window.VcAccordionTabView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)&&_.isString(t.title)&&this.$el.find("> h3 .tab-label").text(t.title)},setEmpty:function(){e("> [data-element_type]",this.$el).addClass("vc_empty-column"),this.$content.addClass("vc_empty-container")},unsetEmpty:function(){e("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcMessageView=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t,n;window.VcMessageView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),n=this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.color.value).join(" ")),_.isObject(t)&&_.isString(t.color)&&n.addClass(t.color)}}),window.VcMessageView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(t){var n,i,o,a,c;switch(window.VcMessageView_Backend.__super__.changeShortcodeParams.call(this,t),n=t.get("params"),i=this.$el.find("> .wpb_element_wrapper"),o=["vc_message_box"],_.isUndefined(n.message_box_style)&&(n.message_box_style="classic"),_.isUndefined(n.message_box_color)&&(n.message_box_color="alert-info"),n.style?"3d"==n.style?(n.message_box_style="3d",n.style="rounded"):"outlined"==n.style?(n.message_box_style="outline",n.style="rounded"):"square_outlined"==n.style&&(n.message_box_style="outline",n.style="square"):n.style="rounded",o.push("vc_message_box-"+n.style),n.message_box_style&&o.push("vc_message_box-"+n.message_box_style),i.attr("class","wpb_element_wrapper"),i.find(".vc_message_box-icon").remove(),a=_.isUndefined(n["icon_"+n.icon_type])?"fa fa-info-circle":n["icon_"+n.icon_type],c=n.color,n.color){case"info":a="fa fa-info-circle";break;case"alert-info":a="vc_pixel_icon vc_pixel_icon-info";break;case"success":a="fa fa-check";break;case"alert-success":a="vc_pixel_icon vc_pixel_icon-tick";break;case"warning":a="fa fa-exclamation-triangle";break;case"alert-warning":a="vc_pixel_icon vc_pixel_icon-alert";break;case"danger":a="fa fa-times";break;case"alert-danger":a="vc_pixel_icon vc_pixel_icon-explanation";break;case"alert-custom":default:c=n.message_box_color}o.push("vc_color-"+c),i.addClass(o.join(" ")),i.prepend(e('<div class="vc_message_box-icon"><i class="'+a+'"></i></div>'))}}),window.VcTextSeparatorView=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t;window.VcTextSeparatorView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)&&_.isString(t.title_align)&&this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.title_align.value).join(" ")).addClass(t.title_align)}}),window.VcCallToActionView=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t;window.VcCallToActionView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)&&_.isString(t.position)&&this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.position.value).join(" ")).addClass(t.position)}}),window.VcCallToActionView3=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t,n,i;window.VcCallToActionView3.__super__.changeShortcodeParams.call(this,e),t=_.extend({add_icon:"",i_type:""},e.get("params")),i=this.$el.find(".vc_admin_label.admin_label_i_type"),_.isEmpty(t.add_icon)?i.addClass("hidden-label").hide():_.isEmpty(t.i_type)||_.isEmpty(t["i_icon_"+t.i_type])||(n=vc_toTitleCase(t.i_type)+' - <i class="'+t["i_icon_"+t.i_type]+'"></i>',i.html("<label>"+i.find("label").text()+"</label>: "+n),i.show().removeClass("hidden-label"))}}),window.VcToggleView=vc.shortcode_view.extend({events:function(){return _.extend({"click .vc_toggle_title":"toggle","click .toggle_title":"toggle"},window.VcToggleView.__super__.events)},toggle:function(t){t&&t.preventDefault(),e(t.currentTarget).toggleClass("vc_toggle_title_active"),e(".vc_toggle_content",this.$el).slideToggle(500)},changeShortcodeParams:function(t){var n;window.VcToggleView.__super__.changeShortcodeParams.call(this,t),n=t.get("params"),_.isObject(n)&&_.isString(n.open)&&"true"===n.open&&e(".vc_toggle_title",this.$el).addClass("vc_toggle_title_active").next().show()}}),window.VcButtonView=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e.preventDefault()},changeShortcodeParams:function(e){var t;if(window.VcButtonView.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)){var n;n=t.color+" "+t.size+" "+t.icon,this.$el.find(".wpb_element_wrapper").removeClass(n),this.$el.find("button.title").attr({"class":"title textfield wpb_button "+n}),"none"!==t.icon&&0===this.$el.find("button i.icon").length?this.$el.find("button.title").append('<i class="icon"></i>'):this.$el.find("button.title i.icon").remove()}}}),window.VcButton2View=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e.preventDefault()},changeShortcodeParams:function(e){var t;if(window.VcButton2View.__super__.changeShortcodeParams.call(this,e),t=e.get("params"),_.isObject(t)){var n;n=(t.color?"vc_btn_"+t.color:"")+" "+(t.color?"vc_btn-"+t.color:"")+" "+(t.size?"vc_btn-"+t.size:"")+" "+(t.size?"vc_btn_"+t.size:"")+" "+(t.style?"vc_btn_"+t.style:""),this.$el.find(".wpb_element_wrapper").removeClass(n),this.$el.find("button.title").attr({"class":"title textfield vc_btn  "+n})}}}),window.VcButton3View=vc.shortcode_view.extend({buttonTemplate:!1,$wrapper:!1,events:function(){return _.extend({"click .vc_btn3":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e.preventDefault()},changeShortcodeParams:function(t){var n;if(window.VcButton3View.__super__.changeShortcodeParams.call(this,t),n=_.extend({},t.get("params")),this.buttonTemplate||(this.buttonTemplate=this.$el.find(".vc_btn3-container").html()),this.$wrapper||(this.$wrapper=this.$el.find(".wpb_element_wrapper")),_.isObject(n)){n.title&&_.isEmpty(n.title.trim())&&(n.title='<span class="vc_btn3-placeholder">&nbsp;</span>'),"custom"===n.style?(n.color=void 0,_.isEmpty(n.custom_background)&&_.isEmpty(n.custom_text)&&(n.color="grey")):"outline-custom"===n.style&&(n.color=void 0,_.isEmpty(n.outline_custom_color)&&_.isEmpty(n.outline_custom_hover_background)&&_.isEmpty(n.outline_custom_hover_text)&&(n.style="outline",n.color="grey"));var i=e(_.template(this.buttonTemplate,{params:n},vc.templateOptions.custom));"custom"===n.style?("undefined"!==n.custom_background&&i.css("background-color",n.custom_background),"undefined"!==n.custom_text&&i.css("color",n.custom_text)):"outline-custom"===n.style&&i.css({"background-color":"transparent","border-color":n.outline_custom_color,color:n.outline_custom_color}).hover(function(){e(this).css({"background-color":n.outline_custom_hover_background,"border-color":n.outline_custom_hover_background,color:n.outline_custom_hover_text})},function(){e(this).css({"background-color":"transparent","border-color":n.outline_custom_color,color:n.outline_custom_color})}),this.$wrapper.find(".vc_btn3-container").html(i)}}}),window.VcTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{"click .add_tab":"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(e){window.VcTabsView.__super__.initialize.call(this,e),_.bindAll(this,"stopSorting")},render:function(){return window.VcTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_tabs_holder"),this.createAddTabButton(),this},ready:function(e){window.VcTabsView.__super__.ready.call(this,e)},createAddTabButton:function(){var t=+new Date+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+t+'" class="new_element_button"></div>'),this.$add_button=e('<li class="add_tab_block"><a href="#new-tab-'+t+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find(".tabs_controls"))},addTab:function(e){if(e.preventDefault(),!this.hasUserAccess())return!1;this.new_tab_adding=!0;var t=window.i18nLocale.tab,n=this.$tabs.find("[data-element_type=vc_tab]").length,i=+new Date+"-"+n+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"vc_tab",params:{title:t,tab_id:i},parent_id:this.model.id}),!1},stopSorting:function(){var t;this.$tabs.find("ul.tabs_controls li:not(.add_tab_block)").each(function(){e(this).find("a").attr("href").replace("#","");t=vc.shortcodes.get(e("[id="+e(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),t.save({order:e(this).index()})}),t&&t.save()},changedContent:function(t){var n=t.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({select:function(t,n){return!e(n.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),this.hasUserAccess()&&this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"==this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),t.model.get("cloned")===!0){var i=(t.model.get("cloned_from"),e(".tabs_controls > .add_tab_block",this.$content)),o=e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertBefore(i);this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",o.index())}else e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?e(".ui-tabs-nav li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(e,n,i){var o,a,c,s;return o=_.isBoolean(i)&&i===!0?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,c=_.extend({},e.get("params")),s=e.get("shortcode"),"vc_tab"===s&&_.extend(c,{tab_id:+new Date+"-"+this.$tabs.find("[data-element-type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),a=t.create({shortcode:s,id:vc_guid(),parent_id:n,order:o,cloned:"vc_tab"!==s,cloned_from:e.toJSON(),params:c}),_.each(t.where({parent_id:e.id}),function(e){this.cloneModel(e,a.get("id"),!0)},this),a}}),window.VcTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var e=this.model.get("params");return window.VcTabView.__super__.render.call(this),e.tab_id||(e.tab_id=+new Date+"-"+Math.floor(11*Math.random()),this.model.save("params",e)),this.id="tab-"+e.tab_id,this.$el.attr("id",this.id),this},ready:function(e){window.VcTabView.__super__.ready.call(this,e),this.$tabs=this.$el.closest(".wpb_tabs_holder");this.model.get("params");return this},changeShortcodeParams:function(t){var n;window.VcTabView.__super__.changeShortcodeParams.call(this,t),n=t.get("params"),_.isObject(n)&&_.isString(n.title)&&_.isString(n.tab_id)&&e(".ui-tabs-nav [href=#tab-"+n.tab_id+"]").text(n.title)},deleteShortcode:function(t){_.isObject(t)&&t.preventDefault();var n=confirm(window.i18nLocale.press_ok_to_delete_section),i=this.model.get("parent_id");if(n!==!0)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:i}).length){var o=vc.shortcodes.get(i);return o.destroy(),!1}var a=this.model.get("params"),c=e("[href=#tab-"+a.tab_id+"]",this.$tabs).parent().index();e("[href=#tab-"+a.tab_id+"]").parent().remove();var s=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;s>0&&this.$tabs.tabs("refresh"),s>c?this.$tabs.tabs("option","active",c):s>0&&this.$tabs.tabs("option","active",s-1)},cloneModel:function(e,n,i){var o,a,c,s;return o=_.isBoolean(i)&&i===!0?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,c=_.extend({},e.get("params")),s=e.get("shortcode"),"vc_tab"===s&&_.extend(c,{tab_id:+new Date+"-"+this.$tabs.find("[data-element_type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),a=t.create({shortcode:s,parent_id:n,order:o,cloned:!0,cloned_from:e.toJSON(),params:c}),_.each(t.where({parent_id:e.id}),function(e){this.cloneModel(e,a.get("id"),!0)},this),a}}),window.VcTabsView35=vc.shortcode_view.extend({new_tab_adding:!1,events:{"click .add_tab":"addTab","click > .controls .column_delete":"deleteShortcode","click > .controls .column_edit":"editElement","click > .controls .column_clone":"clone"},initialize:function(e){window.VcTabsView.__super__.initialize.call(this,e),_.bindAll(this,"stopSorting")},render:function(){return window.VcTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_tabs_holder"),this.createAddTabButton(),this},ready:function(e){window.VcTabsView.__super__.ready.call(this,e)},createAddTabButton:function(){var e=+new Date+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+e+'" class="new_element_button"></div>'),this.$tabs.find(".tabs_controls").append('<li class="add_tab_block"><a href="#new-tab-'+e+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>')},addTab:function(e){e.preventDefault(),this.new_tab_adding=!0;var t="vc_tour"===this.model.get("shortcode")?window.i18nLocale.slide:window.i18nLocale.tab,n=this.$tabs.tabs("length"),i=+new Date+"-"+n+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"vc_tab",params:{title:t,tab_id:i},parent_id:this.model.id}),!1},stopSorting:function(){var t;this.$tabs.find("ul.tabs_controls li:not(.add_tab_block)").each(function(){var n=e(this).find("a").attr("href").replace("#","");e("#"+n).appendTo(this.$tabs),t=vc.shortcodes.get(e("[id="+e(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),t.save({order:e(this).index()})}),t.save()},changedContent:function(t){var n=t.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({select:function(t,n){return!e(n.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"==this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",stop:this.stopSorting,items:"> li:not(.add_tab_block)"})),t.model.get("cloned")===!0){var i=t.model.get("cloned_from"),o=e("#tab-"+i.params.tab_id).index();this.$tabs.tabs("add","#tab-"+n.tab_id,n.title,o-1),this.$tabs.tabs("select",o-1)}else this.$tabs.tabs("add","#tab-"+n.tab_id,n.title,this.$tabs.tabs("length")-1),this.$tabs.tabs("select",this.new_tab_adding?this.$tabs.tabs("length")-2:0);this.new_tab_adding=!1},cloneModel:function(e,n,i){var o,a,c,s;return o=_.isBoolean(i)&&i===!0?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,c=_.extend({},e.get("params")),s=e.get("shortcode"),"vc_tab"===s&&_.extend(c,{tab_id:+new Date+"-"+this.$tabs.tabs("length")+"-"+Math.floor(11*Math.random())}),a=t.create({shortcode:s,id:vc_guid(),parent_id:n,order:o,cloned:"vc_tab"!==e.get("shortcode"),cloned_from:e.toJSON(),params:c}),_.each(t.where({parent_id:e.id}),function(e){this.cloneModel(e,a.get("id"),!0)},this),a}}),window.VcTabView35=window.VcColumnView.extend({render:function(){var e=this.model.get("params");return window.VcTabView35.__super__.render.call(this),this.id="tab-"+e.tab_id,this.$el.attr("id",this.id),this},ready:function(e){window.VcTabView35.__super__.ready.call(this,e),this.$tabs=this.$el.closest(".wpb_tabs_holder");this.model.get("params");return this},changeShortcodeParams:function(t){var n;window.VcTabView35.__super__.changeShortcodeParams.call(this,t),n=t.get("params"),_.isObject(n)&&_.isString(n.title)&&_.isString(n.tab_id)&&e(".ui-tabs-nav [href=#tab-"+n.tab_id+"]").text(n.title)},deleteShortcode:function(t){_.isObject(t)&&t.preventDefault();var n=confirm(window.i18nLocale.press_ok_to_delete_section);if(n!==!0)return!1;var i=this.model.get("params");this.model.destroy(),this.$tabs.tabs("remove",e("[href=#tab-"+i.tab_id+"]").parent().index())},cloneModel:function(e,n,i){var o,a,c,s;return o=_.isBoolean(i)&&i===!0?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,c=_.extend({},e.get("params")),s=e.get("shortcode"),"vc_tab"===s&&_.extend(c,{tab_id:+new Date+"-"+this.$tabs.tabs("length")+"-"+Math.floor(11*Math.random())}),a=t.create({shortcode:s,parent_id:n,order:o,cloned:!0,cloned_from:e.toJSON(),params:c}),_.each(t.where({parent_id:e.id}),function(e){this.cloneModel(e,a.get("id"),!0)},this),a}}),window.VcIconElementView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t,n,i,o;t=e.get("shortcode"),n=e.get("params"),i=vc.map[t],_.isArray(i.params)&&_.each(i.params,function(e){if(!_.isUndefined(e.admin_label)&&e.admin_label){var t,i,o,a;t=e.param_name,i=n[t],o=this.$el.find("> .wpb_element_wrapper"),a=o.children(".admin_label_"+t),a.length&&(""===i||_.isUndefined(i)?a.hide().addClass("hidden-label"):("type"==t&&(_.isUndefined(n["icon_"+i])||(i=vc_toTitleCase(i)+" - <i class='"+n["icon_"+i]+"'></i>")),a.html("<label>"+a.find("label").text()+"</label>: "+i),a.show().removeClass("hidden-label")))}},this),o=vc.app.views[this.model.get("parent_id")],e.get("parent_id")!==!1&&_.isObject(o)&&o.checkIsEmpty()}}),window.VcBackendTtaViewInterface=vc.shortcode_view.extend({sortableSelector:!1,$sortable:!1,$navigation:!1,defaultSectionTitle:window.i18nLocale.tab,sortableUpdateModelIdSelector:"data-vc-target-model-id",activeClass:"vc_active",sortingPlaceholder:"vc_placeholder",events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .vc_controls .vc_control-btn-prepend":"clickPrependSection","click .vc_tta-section-append":"clickAppendSection"},initialize:function(e){window.VcBackendTtaViewInterface.__super__.initialize.call(this,e),_.bindAll(this,"updateSorting")},render:function(){return window.VcBackendTtaViewInterface.__super__.render.call(this),this.$el.addClass("vc_tta-container vc_tta-o-non-responsive"),this},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper .vc_tta-panels")},clickAppendSection:function(e){e.preventDefault(),this.addSection()},clickPrependSection:function(e){e.preventDefault(),this.addSection(!0)},addSection:function(e){var t,n,i;return t=this.defaultSectionTitle,n={shortcode:"vc_tta_section",params:{title:t},parent_id:this.model.get("id"),order:_.isBoolean(e)&&e?vc.add_element_block_view.getFirstPositionIndex():vc.shortcodes.getNextOrder(),prepend:e},i=vc.shortcodes.create(n)},findSection:function(e){return this.$content.children('[data-model-id="'+e+'"]')},getIndex:function(e){return e.index()},buildSortable:function(e){return e.sortable({forcePlaceholderSize:!0,placeholder:this.sortingPlaceholder,helper:this.renderSortingPlaceholder,scroll:!0,cursor:"move",cursorAt:{top:20,left:16},start:function(){},over:function(){},stop:function(e,t){t.item.attr("style","")
},update:this.updateSorting,items:this.sortableSelector})},updateSorting:function(){var t;t=this,this.$sortable.find(this.sortableSelector).each(function(){var n,i,o;o=e(this),i=o.attr(t.sortableUpdateModelIdSelector),n=vc.shortcodes.get(i),vc.storage.lock(),n.save({order:t.getIndex(o)})}),vc.storage.unlock(),vc.storage.save()},makeFirstSectionActive:function(){this.$content.children(":first-child").addClass(this.activeClass)},checkForActiveSection:function(){var e;e=this.$content.children("."+this.activeClass),e.length||this.makeFirstSectionActive()},changeActiveSection:function(e){this.$content.children(".vc_tta-panel."+this.activeClass).removeClass(this.activeClass),this.findSection(e).addClass(this.activeClass)},changedContent:function(e){var t;return t=window.VcBackendTtaViewInterface.__super__.changedContent.call(this,e),this.checkForActiveSection(),this.buildSortable(this.$sortable),t},notifySectionChanged:function(e){var t,n;t=e.get("view"),_.isObject(t)&&(n=e.getParam("title"),_.isString(n)&&n.length||(n=this.defaultSectionTitle),t.$el.find(".vc_tta-panel-title a .vc_tta-title-text").text(n))},notifySectionRendered:function(){},getNextTab:function(e){var t,n,i,o;return o=this.$navigation.children(),t=o.length-2,n=e.index(),i=o.eq(n!==t?n+1:n-1)},renderSortingPlaceholder:function(e,t){return vc.app.renderPlaceholder(e,t)}}),window.VcBackendTtaTabsView=window.VcBackendTtaViewInterface.extend({sortableSelector:"> [data-vc-tab]",sortablePlaceholderClass:"vc_placeholder-tta-tab",navigationSectionTemplate:null,$navigationSectionAdd:null,sortingPlaceholder:"vc_placeholder-tab vc_tta-tab",render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$el.find("> .wpb_element_wrapper .vc_tta-tabs-list"),this.$sortable=this.$navigation,this.$navigationSectionAdd=this.$navigation.children(".vc_tta-tab:first-child"),this.setNavigationSectionTemplate(this.$navigationSectionAdd.prop("outerHTML")),this.$navigationSectionAdd.addClass("vc_tta-section-append").removeAttr("data-vc-target-model-id").removeAttr("data-vc-tab").find("[data-vc-target]").html('<i class="vc_tta-controls-icon vc_tta-controls-icon-plus"></i>').removeAttr("data-vc-tabs").removeAttr("data-vc-target").removeAttr("data-vc-target-model-id").removeAttr("data-vc-toggle"),this},setNavigationSectionTemplate:function(e){this.navigationSectionTemplate=e},getNavigationSectionTemplate:function(){return this.navigationSectionTemplate},getParsedNavigationSectionTemplate:function(e){return _.template(this.getNavigationSectionTemplate(),e,vc.templateOptions.custom)},changeNavigationSectionTitle:function(e,t){this.findNavigationTab(e).find("[data-vc-target]").text(t)},changeActiveSection:function(e){window.VcBackendTtaTabsView.__super__.changeActiveSection.call(this,e),this.$navigation.children("."+this.activeClass).removeClass(this.activeClass),this.findNavigationTab(e).addClass(this.activeClass)},notifySectionRendered:function(t){var n,i,o,a;window.VcBackendTtaTabsView.__super__.notifySectionRendered.call(this,t),i=t.getParam("title"),n=e(this.getParsedNavigationSectionTemplate({model_id:t.get("id"),section_title:_.isString(i)&&i.length>0?i:this.defaultSectionTitle})),t.get("cloned")?(a=t.get("cloned_from"),_.isObject(a)&&(o=this.$navigation.children('[data-vc-target-model-id="'+a.id+'"]'),o.length?n.insertAfter(o):n.insertBefore(this.$navigation.children(".vc_tta-section-append")))):n.insertBefore(t.get("prepend")?this.$navigation.children(":first-child"):this.$navigation.children(":last-child"))},notifySectionChanged:function(e){var t;window.VcBackendTtaTabsView.__super__.notifySectionChanged.call(this,e),t=e.getParam("title"),_.isString(t)&&t.length||(t=this.defaultSectionTitle),this.changeNavigationSectionTitle(e.get("id"),t),e.view.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name").removeClass("vc_element-move")},makeFirstSectionActive:function(){var e;e=this.$navigation.children(":first-child:not(.vc_tta-section-append)").addClass(this.activeClass),e.length&&this.findSection(e.data("vc-target-model-id")).addClass(this.activeClass)},findNavigationTab:function(e){return this.$navigation.children('[data-vc-target-model-id="'+e+'"]')},removeSection:function(e){var t,n,i;t=this.findNavigationTab(e.get("id")),i=t.hasClass(this.activeClass),i&&(n=this.getNextTab(t),n.addClass(this.activeClass),this.changeActiveSection(n.data("vc-target-model-id"))),t.remove()},renderSortingPlaceholder:function(e,t){var n,i,o;return n=t,i=t.width()+1,o=t.height(),n.width(i),n.height(o),n}}),window.VcBackendTtaAccordionView=VcBackendTtaViewInterface.extend({sortableSelector:"> .vc_tta-panel:not(.vc_tta-section-append)",sortableUpdateModelIdSelector:"data-model-id",defaultSectionTitle:window.i18nLocale.section,render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$content,this.$sortable=this.$content,this},removeSection:function(e){var t,n,i;t=this.findSection(e.get("id")),i=t.hasClass(this.activeClass),i&&(n=this.getNextTab(t),n.addClass(this.activeClass))},addShortcode:function(e){var t;t=_.last(vc.shortcodes.filter(function(e){return e.get("parent_id")===this.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))},e.model)),t?e.render().$el.insertAfter("[data-model-id="+t.id+"]"):this.$content.prepend(e.render().el)}}),window.VcBackendTtaTourView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaSectionView=window.VcColumnView.extend({parentObj:null,events:{"click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-prepend":"addElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-edit":"editElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_container_for_children")},render:function(){var e;return window.VcBackendTtaSectionView.__super__.render.call(this),e=vc.shortcodes.get(this.model.get("parent_id")),_.isObject(e)&&!_.isUndefined(e.view)&&(this.parentObj=e),this.$el.addClass("vc_tta-panel"),this.$el.attr("style",""),this.$el.attr("data-vc-toggle","tab"),this.replaceTemplateVars(),this},replaceTemplateVars:function(){var e,t;e=this.model.getParam("title"),_.isEmpty(e)&&(e=this.parentObj&&this.parentObj.defaultSectionTitle&&this.parentObj.defaultSectionTitle.length?this.parentObj.defaultSectionTitle:window.i18nLocale.section),t=this.$el.find(".vc_tta-panel-heading"),t.html(_.template(t.html(),{model_id:this.model.get("id"),section_title:e},vc.templateOptions.custom))},getIndex:function(){return this.$el.index()},ready:function(){this.updateParentNavigation(),window.VcBackendTtaSectionView.__super__.ready.call(this)},updateParentNavigation:function(){_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionRendered&&this.parentObj.view.notifySectionRendered(this.model)},deleteShortcode:function(e){var t;return _.isObject(e)&&e.preventDefault(),t=confirm(window.i18nLocale.press_ok_to_delete_section),t!==!0?!1:(1===vc.shortcodes.where({parent_id:this.model.get("parent_id")}).length?(this.model.destroy(),this.parentObj&&this.parentObj.destroy()):(this.parentObj&&this.parentObj.view&&this.parentObj.view.removeSection&&this.parentObj.view.removeSection(this.model),this.model.destroy()),!0)},changeShortcodeParams:function(e){window.VcBackendTtaSectionView.__super__.changeShortcodeParams.call(this,e),_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionChanged&&this.parentObj.view.notifySectionChanged(e)}}),vc.addTemplateFilter(function(e){var t=VCS4()+"-"+VCS4();return e.replace(/tab\_id\=\"([^\"]+)\"/g,'tab_id="$1'+t+'"')})}(window.jQuery);