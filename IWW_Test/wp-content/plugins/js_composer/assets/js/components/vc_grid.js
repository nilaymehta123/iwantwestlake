var VcGrid,vcGridSettings={addItemsAnimation:"zoomIn",mobileWindowWidth:768,itemAnimationSpeed:1e3,itemAnimationDelay:[],clearAnimationDelays:function(){_.each(this.itemAnimationDelay,function(i){window.clearTimeout(i)}),this.itemAnimationDelay=[]}};!function(i){"use strict";function t(t){return this.each(function(){var e=i(this),n=e.data("vcGrid");n||e.data("vcGrid",n=new VcGrid(this)),"string"==typeof t&&n[t]()})}VcGrid=function(t){this.$el=i(t),this.settings={},this.$filter=!1,this.gridBuilder=!1,this.init()},VcGrid.prototype.init=function(){_.bindAll(this,"filterItems","filterItemsDropdown"),this.setSettings(),this.initStyle(),this.initHover(),this.initZoneLink()},VcGrid.prototype.setSettings=function(){this.settings=i.extend({visible_pages:5},this.$el.data("vcGridSettings")||{})},VcGrid.prototype.initStyle=function(){var t=this.settings.style?i.camelCase("vc-grid-style-"+this.settings.style):!1;t&&!_.isUndefined(window[t])&&window[t].prototype.render&&(this.gridBuilder=new window[t](this),this.gridBuilder.render())},VcGrid.prototype.initFilter=function(){this.$filter=this.$el.find("[data-vc-grid-filter]"),this.$filterDropdown=this.$el.find("[data-vc-grid-filter-select]"),this.$filter.length&&this.$filter.find(".vc_grid-filter-item").unbind("click").click(this.filterItems),this.$filterDropdown.length&&this.$filterDropdown.unbind("change").change(this.filterItemsDropdown)},VcGrid.prototype.initHover=function(){this.$el.on("mouseover",".vc_grid-item-mini",function(){var t=i(this);t.addClass("vc_is-hover")}).on("mouseleave",".vc_grid-item-mini",function(){var t=i(this);t.removeClass("vc_is-hover")})},VcGrid.prototype.initZoneLink=function(){window.vc_iframe?(this.$el.on("click.zonePostLink","[data-vc-link]",function(){var t=(i(this),i(this).data("vcLink"));window.open(t)}),this.$el.on("click",".vc_gitem-link",function(t){var e=i(this);t.preventDefault(),!e.hasClass("vc-gitem-link-ajax")&&window.open(e.attr("href"))})):this.$el.on("click.zonePostLink","[data-vc-link]",function(){var t=i(this),e=i(this).data("vcLink");"_blank"===t.data("vcTarget")?window.open(e):window.location.href=e})},VcGrid.prototype.initHover_old=function(){this.$el.on("mouseover",".vc_grid-item",function(){var t=i(this);t.hasClass("vc_is-hover")||(vcGridSettings.clearAnimationDelays(),t.addClass("vc_is-hover vc_is-animated"),t.find(".vc_grid-item-row-animate").each(function(){var e=i(this),n=e.data("animationIn"),a=e.data("animationOut");e.removeClass(a).addClass(n),vcGridSettings.itemAnimationDelay.push(_.delay(function(){e.removeClass(n),t.removeClass("vc_is-animated")},vcGridSettings.itemAnimationSpeed))}))}).on("mouseleave",".vc_grid-item",function(){var t=i(this);vcGridSettings.clearAnimationDelays(),t.addClass("vc_is-animated").removeClass("vc_is-hover"),t.find(".vc_grid-item-row-animate").each(function(){var i=t.find(".vc_grid-item-row-animate"),e=i.data("animationOut"),n=i.data("animationIn");i.addClass(e),vcGridSettings.itemAnimationDelay.push(_.delay(function(){i.removeClass(e+" "+n),t.removeClass("vc_is-animated")},vcGridSettings.itemAnimationSpeed-1))})})},VcGrid.prototype.filterItems=function(t){var e=(this.style?i.camelCase("filter-"+this.style):"filterAll",i(t.currentTarget).find("[data-vc-grid-filter-value]")),n=e.data("vcGridFilterValue");return t&&t.preventDefault(),e.hasClass("vc_active")?!1:(this.$filter.find(".vc_active").removeClass("vc_active"),this.$filterDropdown.find(".vc_active").removeClass("vc_active"),this.$filterDropdown.find('[value="'+n+'"]').addClass("vc_active").attr("selected","selected"),e.parent().addClass("vc_active"),void this.gridBuilder.filter(n))},VcGrid.prototype.filterItemsDropdown=function(){var i=this.$filterDropdown.find(":selected"),t=i.val();return i.hasClass("vc_active")?!1:(this.$filterDropdown.find(".vc_active").removeClass("vc_active"),this.$filter.find(".vc_active").removeClass("vc_active"),this.$filter.find('[data-vc-grid-filter-value="'+t+'"]').parent().addClass("vc_active"),i.addClass("vc_active"),void this.gridBuilder.filter(t))},VcGrid.prototype.ajax=function(t,e){var n;_.isUndefined(t)&&(t={}),n=_.extend({action:"vc_get_vc_grid_data",vc_action:"vc_get_vc_grid_data",tag:this.settings.tag,data:this.settings,vc_post_id:this.$el.data("vcPostId")},t),i.ajax({type:"POST",dataType:"html",url:this.$el.data("vcRequest"),data:n}).done(e)},i.fn.vcGrid=t,i.fn.vcGrid.Constructor=VcGrid,i(document).ready(function(){i("[data-vc-grid-settings]").vcGrid()})}(window.jQuery);