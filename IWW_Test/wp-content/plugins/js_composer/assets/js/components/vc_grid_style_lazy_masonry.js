var vcGridStyleLazyMasonry;!function(t){vcGridStyleLazyMasonry=function(i){this.grid=i,this.settings=i.settings,this.$el=!1,this.filterValue=null,this.filtered=!1,this.$content=!1,this.isLoading=!1,this.$loader=t('<div class="vc_grid-loading"></div>'),this.masonryEnabled=!1,_.bindAll(this,"setMasonry"),this.init()},vcGridStyleLazyMasonry.prototype=_.extend({},vcGridStyleLazy.prototype,{showItems:function(){if(this.isLoading===!0)return!1;this.setIsLoading();var t=this.$content.find(".vc_grid_filter-item:not(.vc_visible-item):lt("+this.settings.items_per_page+")"),i=this;t.imagesLoaded(function(){t.addClass("vc_visible-item"),i.setItems(t),i.filtered&&(i.filtered=!1,i.setMasonry(),i.initScroll(),window.vc_prettyPhoto()),i.unsetIsLoading(),jQuery(window).trigger("grid:items:added",i.$el)})},setIsLoading:function(){this.$el.append(this.$loader),this.isLoading=!0},filter:function(i){return i=_.isUndefined(i)||"*"===i?"":i,this.filterValue==i?!1:(this.$content.data("masonry")&&this.$content.masonry("destroy"),this.masonryEnabled=!1,this.$content.find(".vc_visible-item, .vc_grid_filter-item").removeClass("vc_visible-item vc_grid_filter-item "+("none"!=vcGridSettings.addItemsAnimation?vcGridSettings.addItemsAnimation+" animated":"")),this.filterValue=i,this.$content.find(".vc_grid-item"+this.filterValue).addClass("vc_grid_filter-item"),this.filtered=!0,t(window).resize(this.setMasonry),this.setMasonry(),void _.defer(this.showItems))},setItems:function(t){this.masonryEnabled?this.$content.masonry("appended",t):this.setMasonry()},setMasonry:function(){var t=window.innerWidth;t<vcGridSettings.mobileWindowWidth?(this.$content.data("masonry")&&this.$content.masonry("destroy"),this.masonryEnabled=!1):this.masonryEnabled?(this.$content.masonry("reloadItems"),this.$content.masonry("layout")):(this.$content.masonry({itemSelector:".vc_visible-item",isResizeBound:!1}),this.masonryEnabled=!0)}})}(window.jQuery);